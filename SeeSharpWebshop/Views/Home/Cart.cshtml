@using SeeSharpWebshop.Controllers
@model List<SeeSharpWebshop.Project.Core.Models.CartModel>
@{
    ViewData["Title"] = "Cart";
}

<h2>Cart</h2>

@foreach (SeeSharpWebshop.Project.Core.Models.CartModel item in Model)
{
    <div class="form-group input-group">
        <span class="input-group-addon">@item.Name</span>
        <input data-product="@item.ProductID" type="number" value="@item.Amount" min="0" class="form-control" />
        <span class="input-group-addon">@(item.Price * item.Amount) kr</span>
        <br />
    </div>
}

<div class="panel panel-default pull-right"><div class="panel-body">total</div></div>

<script>
    document.querySelectorAll(".amount").forEach(e => {
        e.addEventListener("change", e => {
            if (e.target.value < 0 || isNaN(e.target.value)) {
                e.target.value = 0;
            }
        });
    });
</script>
<br />
<a asp-controller="Home" asp-action="ClearCart" class="text-danger">Clear cart <span class="glyphicon glyphicon-trash"></span></a>

<a asp-controller="Home" asp-action="CompletePurchase" class="btn btn-success">Complete <span class="glyphicon glyphicon-check"></span></a>