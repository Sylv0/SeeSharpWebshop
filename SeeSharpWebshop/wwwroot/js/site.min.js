const updateCart=n=>{fetch(`http://localhost:51421/api/cart/${n}`).then(n=>n.json()).then(n=>document.querySelector("span.badge").innerHTML=n)},AddLatestProductToList=()=>{const n=document.querySelector(".row");fetch("http://localhost:51421/api/product").then(n=>n.json()).then(t=>{if(t.length>0){const i=t[t.length-1];n.innerHTML+=`
                <div class="col-md-4 col-sm-12 product-panel">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <h3 class="panel-title">${i.name}</h3>
                        </div>
                        <div class="panel-body">
                            ${i.description}
                        </div>
                        <div class="panel-footer">${i.price} kr<a href="Home/AddItemToCart/${i.id}" class="pull-right add-to-cart"><span class="glyphicon glyphicon-plus"></span></a></div>
                    </div>
                </div>
            `}})};window.onload=()=>{const n=document.cookie.match(/guid=([a-zA-Z0-9-]*)/)[1];try{document.querySelector("a.text-danger").addEventListener("click",n=>{window.confirm("Are you sure?")||n.preventDefault()})}catch(t){}try{document.querySelectorAll("input.amount").forEach(t=>{t.addEventListener("change",t=>{if(t.target.value<=0)if(window.confirm("You're settng the value to less than 1, would you like to romove it?")){let i=new FormData;i.append("guid",n);i.append("Id",t.target.dataset.product);i.append("Amount",t.target.value);let r=new Request("http://localhost:51421/api/cart/Remove",{method:"POST",body:i});fetch(r).then(n=>n.json()).then(()=>{updateCart(n)}).catch(n=>console.log(n))}else t.target.value=1;let i=new FormData;i.append("guid",n);i.append("Id",t.target.dataset.product);i.append("Amount",t.target.value);let r=new Request("http://localhost:51421/api/cart/Update",{method:"POST",body:i});fetch(r).then(n=>n.json()).then(()=>{updateCart(n)}).catch(n=>console.log(n))})})}catch(t){}try{document.querySelectorAll("a.add-to-cart").forEach(t=>{t.addEventListener("click",t=>{t.preventDefault();let i=t.target;i.getAttribute("href")===null&&(i=t.target.parentNode);let r=new FormData;r.append("guid",n);r.append("Id",i.getAttribute("href").match(/\/([0-9]*$)/)[1]);let u=new Request("http://localhost:51421/api/cart/Add",{method:"POST",body:r});fetch(u).then(n=>n.json()).then(()=>{updateCart(n)}).catch(n=>console.log(n))})})}catch(t){}try{document.forms.add_product_form.addEventListener("submit",n=>{if(n.preventDefault(),parseFloat(n.target.price.value)){let t=new FormData;t.append("Name",n.target.name.value);t.append("Description",n.target.description.value);t.append("Price",n.target.price.value);let i=new Request("http://localhost:51421/api/product/Add",{method:"POST",body:t});fetch(i).then(n=>n.json()).then(t=>{t===200&&(AddLatestProductToList(),n.target.price.parentNode.classList.remove("has-error"),n.target.name.value="",n.target.description.value="",n.target.price.value="",n.target.classList.add("bg-success"),setTimeout(function(){n.target.classList.remove("bg-success")},1e3))}).catch(n=>console.log(n))}else n.target.price.parentNode.classList.add("has-error")})}catch(t){}updateCart(n)};