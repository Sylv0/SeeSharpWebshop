const updateCart=n=>{fetch(`http://localhost:51421/api/cart/${n}`).then(n=>n.json()).then(n=>document.querySelector("span.badge").innerHTML=n)};window.onload=()=>{const n=document.cookie.match(/guid=([a-zA-Z0-9-]*)/)[1];try{document.querySelector("a.text-danger").addEventListener("click",n=>{window.confirm("Are you sure?")||n.preventDefault()})}catch(t){console.log(t)}try{document.querySelectorAll("input.amount").forEach(t=>{t.addEventListener("change",t=>{if(t.target.value<=0)if(window.confirm("You're settng the value to less than 1, would you like to romove it?")){let i=new FormData;i.append("guid",n);i.append("Id",t.target.dataset.product);i.append("Amount",t.target.value);let r=new Request("http://localhost:51421/api/cart/Remove",{method:"POST",body:i});fetch(r).then(n=>n.json()).then(()=>{updateCart(n)}).catch(n=>console.log(n))}else t.target.value=1;let i=new FormData;i.append("guid",n);i.append("Id",t.target.dataset.product);i.append("Amount",t.target.value);let r=new Request("http://localhost:51421/api/cart/Update",{method:"POST",body:i});fetch(r).then(n=>n.json()).then(()=>{updateCart(n)}).catch(n=>console.log(n))})})}catch(t){console.log(t)}try{document.querySelectorAll("a.add-to-cart").forEach(t=>{t.addEventListener("click",t=>{t.preventDefault();let i=t.target;i.getAttribute("href")===null&&(i=t.target.parentNode);let r=new FormData;r.append("guid",n);r.append("Id",i.getAttribute("href").match(/\/([0-9]*$)/)[1]);let u=new Request("http://localhost:51421/api/cart/Add",{method:"POST",body:r});fetch(u).then(n=>n.json()).then(()=>{updateCart(n)}).catch(n=>console.log(n))})})}catch(t){console.error(t)}updateCart(n)};